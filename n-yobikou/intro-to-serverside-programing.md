# ã‚µãƒ¼ãƒã‚µã‚¤ãƒ‰ãƒ—ãƒ­ã‚°ãƒ©ãƒŸãƒ³ã‚°å…¥é–€
Source: [ã‚µãƒ¼ãƒã‚µã‚¤ãƒ‰ãƒ—ãƒ­ã‚°ãƒ©ãƒŸãƒ³ã‚°å…¥é–€](https://www.nnn.ed.nico/courses/497/chapters/6890)

## Node.js
ã“ã®å­¦ç¿’è³‡æ–™ã§ã® Node.js ã®ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«æ‰‹é †  
- ubuntu ã® Docker ã§å®Ÿæ–½
- nvm ã¨ã„ã† Node.js ã®ãƒãƒ¼ã‚¸ãƒ§ãƒ³ãƒãƒãƒ¼ã‚¸ãƒ£ãƒ¼å°å…¥
    - `curl -o- https://raw.githubusercontent.com/creationix/nvm/v0.34.0/install.sh | bash`
    - `source ~/.bashrc`
    - `nvm` ã¨æ‰“ã¡è¾¼ã‚“ã§ã€ä½¿ã„æ–¹ãŒè¡¨ç¤ºã•ã‚Œã‚Œã°ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«å®Œäº†
- nvm ã‚’ä½¿ã£ã¦ Node.js ã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«
    - `nvm install v10.14.2`
    - `nvm use v10.14.2`
        - `Now using node v10.14.2 (npm v6.4.1)` ã¨è¡¨ç¤ºã•ã‚Œã‚Œã°ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«å®Œäº†
- Node.js ã‚’ä½¿ã£ã¦ã¿ã‚‹
    - `node` ã¨ã ã‘å…¥åŠ›ã™ã‚‹ã¨ `>` ãŒè¡¨ç¤ºã•ã‚Œã€ã‚³ãƒ³ã‚½ãƒ¼ãƒ«ãŒå…¥åŠ›ã‚’å—ã‘ä»˜ã‘ã‚‹çŠ¶æ…‹ã«ãªã‚‹ã€‚ã“ã‚Œã¯ **REPL** (ãƒ¬ãƒ—ãƒ«ï¼›Read-Eval-Print Loop) ã¨ã„ã†ã‚‚ã®ã€‚
- ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã‚’ä½œã£ã¦ã€ãã“ã« JavaScript ãƒ•ã‚¡ã‚¤ãƒ«ã‚’ä½œæˆã™ã‚Œã° `node app.js <some_arg>` ã¨ã„ã†ã‚ˆã†ã«å®Ÿè¡Œã§ãã‚‹ã€‚

## ã‚¢ãƒ«ã‚´ãƒªã‚ºãƒ ã®æ”¹å–„
å®Ÿè¡Œæ™‚é–“ã‚’æ¸¬å®šã™ã‚‹ã«ã¯ time ã‚³ãƒãƒ³ãƒ‰ã‚’ä½¿ã†ã€‚

```bash
time node app.js
```
ã“ã‚Œã‚’å®Ÿè¡Œã™ã‚‹ã¨ã€ä»¥ä¸‹ã®ã‚ˆã†ã«çµæœãŒè¡¨ç¤ºã•ã‚Œã‚‹ã€‚

```
real	0m2.029s
user	0m2.040s
sys     0m0.023s
```
ã“ã‚Œã¯å®Ÿè¡Œã«ã‹ã‹ã£ãŸã€å®Ÿéš›ã®æ™‚é–“ï¼ˆrealï¼‰ã€ä»Šã®å®Ÿè¡Œãƒ¦ãƒ¼ã‚¶ãƒ¼ã¨ã—ã¦ã‹ã‹ã£ãŸæ™‚é–“ï¼ˆuserï¼‰ã€ã‚·ã‚¹ãƒ†ãƒ ãŒåˆ¥ã®ã“ã¨ã«ä½¿ã£ãŸæ™‚é–“ï¼ˆsysï¼‰ã‚’è¡¨ç¤ºã—ã¦ã„ã‚‹ã€‚

ãƒ•ã‚£ãƒœãƒŠãƒƒãƒæ•°åˆ—ï¼ˆfib(n) = fib(n-1) + fib(n-2) ãŸã ã— fib(0) = 0, fib(1) = 1ï¼‰ã®è¨ˆç®—ã¯ã€ä»¥ä¸‹ã®ã‚ˆã†ã«å¢—åŠ ã—ã¦ã„ãã€‚
- n ãŒï¼’ã®æ™‚ã® fib(2) ã¯ã€fib(1) + fib(0)ã€ã¤ã¾ã‚Šã€0 + 0 + 1ã§ 1å›
- n ãŒï¼“ã®æ™‚ã® fib(3) ã¯ã€fib(2) + fib(1)ã€ã“ã‚Œã¯ã€1 + 0 + 1 ã§ 2å›
- n ãŒï¼”ã®æ™‚ã® fib(4) ã¯ã€fib(3) + fib(2)ã€ã“ã‚Œã¯ã€2 + 1 + 1 ã§ 4å›
- n ãŒï¼•ã®æ™‚ã® fib(5) ã¯ã€fib(4) + fib(3)ã€ã“ã‚Œã¯ã€4 + 2 + 1 ã§ 7å›
- n ãŒï¼–ã®æ™‚ã® fib(6) ã¯ã€fib(5) + fib(4)ã€ã“ã‚Œã¯ã€7 + 4 + 1 ã§ 12å›
- n ãŒï¼—ã®æ™‚ã® fib(7) ã¯ã€fib(6) + fib(5)ã€ã“ã‚Œã¯ã€12 + 7 + 1 ã§ 20å›
- n ãŒï¼˜ã®æ™‚ã® fib(8) ã¯ã€fib(7) + fib(6)ã€ã“ã‚Œã¯ã€20 + 12 + 1 ã§ 33å›
- n ãŒ50ã®æ™‚ã® fib(50) ã¯ã€fib(49) + fib(48)ã€ã“ã‚Œã¯ã€12,586,269,024 + 7,778,742,048 + 1 ã§ 20,365,011,073å›
- n ãŒ100ã®æ™‚ã® fib(100) ã¯ã€fib(99) + fib(98)ã€ã“ã‚Œã¯ã€354,224,848,179,261,915,074 + 218,922,995,834,555,169,025 + 1 ã§ 573,147,844,013,817,084,100å›

ã“ã®ã‚ˆã†ã«ã€å›ã‚’é‡ã­ã‚‹ã¨å¾Œã«å€ã€…ã«è¨ˆç®—å›æ•°ãŒå¢—ãˆã‚‹ã‚ˆã†ãªå‡¦ç†ã®å¢—ãˆæ–¹ã‚’ **æŒ‡æ•°ã‚ªãƒ¼ãƒ€ãƒ¼** ã¨ã„ã„ã€ *O(2^n)* ã¨è¡¨ã™ã€‚  
  
### ğŸ‘ãƒ—ãƒ­ãƒ•ã‚¡ã‚¤ãƒ«ãƒ„ãƒ¼ãƒ«ã®ä½¿ã„æ–¹
å‡¦ç†ã«æ™‚é–“ãŒã‹ã‹ã£ã¦ã„ã‚‹æ§˜å­ã‚„ã©ã‚Œãã‚‰ã„ãƒ¡ãƒ¢ãƒªã‚’ä½¿ã£ã¦ã„ã‚‹ã®ã‹ã‚’èª¿ã¹ã‚‹æ–¹æ³•ã« **ãƒ—ãƒ­ãƒ•ã‚¡ã‚¤ãƒ«** ã¨å‘¼ã°ã‚Œã‚‹æ–¹æ³•ãŒã‚ã‚‹ã€‚

```bash
node --prof app.js
```

ä»¥ä¸Šã‚’å®Ÿè¡Œã™ã‚‹ã“ã¨ã§ã€`isolate-0x395f810-v8.log` ã¨ã„ã†ã‚ˆã†ãªåå‰ã®ãƒ­ã‚°ãƒ•ã‚¡ã‚¤ãƒ«ã«ãƒ—ãƒ­ãƒ•ã‚¡ã‚¤ãƒ«ã®æ§˜å­ãŒå‡ºåŠ›ã•ã‚Œã‚‹ã€‚ã“ã®ãƒ­ã‚°ãƒ•ã‚¡ã‚¤ãƒ«ã¯ã€æ¬¡ã®ã‚³ãƒãƒ³ãƒ‰ã§ã‚ã‹ã‚Šã‚„ã™ãè¡¨ç¤ºã•ã›ã‚‹ã“ã¨ãŒã§ãã‚‹ã€‚

```bash
node --prof-process isolate-0x395f810-v8.log 
```

ã“ã†ã™ã‚‹ã¨ã€ãƒ—ãƒ­ãƒ•ã‚¡ã‚¤ãƒ«çµæœãŒè¡¨ç¤ºã•ã‚Œã‚‹ï¼ˆã‹ãªã‚Šé•·ã„ï¼‰ã€‚ã“ã®ä¸­ã® `[Summary]` ã¨ã„ã†é …ç›®ã«ã€ãƒ—ãƒ­ã‚°ãƒ©ãƒ ã®å‡¦ç†å…¨ä½“ã®æ¦‚è¦ãŒç¤ºã•ã‚Œã¦ã„ã‚‹ã€‚

```
 [Summary]:
   ticks  total  nonlib   name
   1575   89.6%   94.1%  JavaScript
      0    0.0%    0.0%  C++
      3    0.2%    0.2%  GC
     84    4.8%          Shared libraries
     98    5.6%          Unaccounted
```

ã¾ãŸã€`[Bottom up (heavy) profile]` ã¨ã„ã†é …ç›®ã«ã€æ™‚é–“ã®ã‹ã‹ã£ãŸå‡¦ç†ãŒä¸¦ã‚“ã§ã„ã‚‹ã€‚

```
 [Bottom up (heavy) profile]:
  Note: percentage shows a share of a particular caller in the total
  amount of its parent calls.
  Callers occupying less than 1.0% are not shown.

   ticks parent  name
   1573   89.5%  LazyCompile: *fib /workspace/fibonacci/app.js:3:13
   1573  100.0%    LazyCompile: *fib /workspace/fibonacci/app.js:3:13
   1573  100.0%      LazyCompile: *fib /workspace/fibonacci/app.js:3:13
   1573  100.0%        LazyCompile: *fib /workspace/fibonacci/app.js:3:13
   1573  100.0%          LazyCompile: *fib /workspace/fibonacci/app.js:3:13
   1573  100.0%            LazyCompile: *fib /workspace/fibonacci/app.js:3:13
```

ä¸€ç•ªå·¦ã® ticks ã¨ã„ã†åˆ—ã¯ã€å„å‡¦ç†ã«ã‹ã‹ã£ãŸã‚¤ãƒ™ãƒ³ãƒˆãƒ«ãƒ¼ãƒ—æ•°ã‚’ç¤ºã—ã¦ã„ã‚‹ã€‚ã“ã‚Œã‚‰ã‚’ã¿ã‚‹ã¨ã€fib ã¨ã„ã†é–¢æ•°ã®å‘¼ã³å‡ºã—ã«ã»ã¨ã‚“ã©ã®æ™‚é–“ãŒã‹ã‹ã£ã¦ã„ã‚‹ã“ã¨ãŒã‚ã‹ã‚‹ã€‚

### ãƒ¡ãƒ¢åŒ–ã‚’ä½¿ã£ãŸã‚¢ãƒ«ã‚´ãƒªã‚ºãƒ ã®æ”¹å–„
Map ã‚’ç”¨ã„ã¦ä»¥ä¸‹ã®ã‚ˆã†ã«ãƒ•ã‚£ãƒœãƒŠãƒƒãƒé–¢æ•°ã‚’å®Ÿè£…ã™ã‚‹ã€‚

```js
'use strict';

const memo = new Map();
memo.set(0, 0);
memo.set(1, 1);

const fib = n => {
  if (memo.has(n)) {
    return memo.get(n);
  } 
  const value = fib(n-1) + fib(n-2);
  memo.set(n, value);
  return value;
}

const length = 40;
for (let i=0; i <= length; i++) {
  console.log(fib(i));
} 
```

`time node app.js` ã‚’å®Ÿè¡Œã™ã‚‹ã¨ã€

```
real	0m0.079s
user	0m0.058s
sys     0m0.021s
```

ã“ã®ã‚ˆã†ã«å¤§å¹…ã«é€Ÿããªã£ãŸã“ã¨ãŒã‚ã‹ã‚‹ã€‚ãƒ—ãƒ­ãƒ•ã‚¡ã‚¤ãƒ«ã‚‚å®Ÿè¡Œã—ã¦ã¿ã‚‹ã€‚ï¼ˆ`node --prof app.js`â†’`node --prof-process isolate-xxx.log`ï¼‰

å‡ºåŠ›ã•ã‚ŒãŸãƒ—ãƒ­ãƒ•ã‚¡ã‚¤ãƒ«ã® `[Summary]` ã‚’è¦‹ã¦ã¿ã‚‹ã¨ä»¥ä¸‹ã®ã‚ˆã†ã«ãªã‚Šã€total ã®æ•°å€¤ã‚’ã¿ã‚‹ã¨ã€JavaScript ã®å‡¦ç†ã«ã‹ã‹ã‚‹æ™‚é–“ãŒå¤§å¹…ã«æ¸›ã£ãŸã“ã¨ãŒã‚ã‹ã‚‹ã€‚

```
 [Summary]:
   ticks  total  nonlib   name
      2    2.2%  100.0%  JavaScript
      0    0.0%    0.0%  C++
      4    4.5%  200.0%  GC
     87   97.8%          Shared libraries
```

`[Bottom up (heavy) profile]` ã®é …ç›®ã‚’ã¿ã‚‹ã¨ã€æœ€ã‚‚æ™‚é–“ã®ã‹ã‹ã£ã¦ã„ã‚‹å‡¦ç†ãŒã‚‚ã¯ã‚„ fib é–¢æ•°ã®å®Ÿè¡Œã§ã¯ãªã„ã“ã¨ãŒã‚ã‹ã‚‹ã€‚

```
 [Bottom up (heavy) profile]:
  Note: percentage shows a share of a particular caller in the total
  amount of its parent calls.
  Callers occupying less than 1.0% are not shown.

   ticks parent  name
     36   40.4%  /root/.nvm/versions/node/v10.14.2/bin/node
     34   94.4%    /root/.nvm/versions/node/v10.14.2/bin/node
     20   58.8%      LazyCompile: ~NativeModule.compile internal/bootstrap/loaders.js:302:44
     20  100.0%        LazyCompile: ~NativeModule.require internal/bootstrap/loaders.js:148:34
      4   20.0%          Script: ~<anonymous> util.js:1:11
```

ã“ã®ãƒ¡ãƒ¢åŒ–ã‚’ä½¿ã£ãŸã‚¢ãƒ«ã‚´ãƒªã‚ºãƒ ã®æ”¹å–„ãŒã•ã‚ŒãŸã“ã¡ã‚‰ã® fib é–¢æ•°ã®ã‚ªãƒ¼ãƒ€ãƒ¼ã¯ã€*O(n)* ã¨ãªã‚‹ã€‚n ã«å¯¾ã—ã¦ n å€ã®æ™‚é–“ã‚’ã‹ã‘ã‚Œã°å•é¡Œã‚’è§£ãã“ã¨ãŒã§ãã‚‹ã¨ã„ã†ã“ã®ã‚ˆã†ãªã‚ªãƒ¼ãƒ€ãƒ¼ã‚’ç·šå½¢ã‚ªãƒ¼ãƒ€ãƒ¼ã¨ã„ã†ã€‚

## é›†è¨ˆå‡¦ç†ã‚’è¡Œã†ãƒ—ãƒ­ã‚°ãƒ©ãƒ 

**ã“ã“ã§ç”¨ã„ã‚‹ csv ãƒ•ã‚¡ã‚¤ãƒ«ã¯ [ã“ã¡ã‚‰](https://github.com/progedu/adding-up/blob/master/popu-pref.csv)**

```js
const fs = require('fs');
const readline = require('readline')
```

ã“ã®éƒ¨åˆ†ã¯ã€Node.js ã«ç”¨æ„ã•ã‚ŒãŸ **ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«** ã‚’å‘¼ã³å‡ºã—ã¦ã„ã‚‹ã€‚

`fs` ã¯ FileSystem ã®ç•¥ã§ã€ãƒ•ã‚¡ã‚¤ãƒ«ã‚’æ‰±ã†ãŸã‚ã®ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ã€‚
`readline` ã¯ã€ãƒ•ã‚¡ã‚¤ãƒ«ã‚’ä¸€è¡Œãšã¤èª­ã¿è¾¼ã‚€ãŸã‚ã®ãƒ¢ã‚¸ãƒ¥ãƒ¼å£²ã‚‹ã€‚

```js
const rs = fs.createReadStream('./popu-pref.csv');
const rl = readline.createInterface({ 'input': rs, 'output' : {} });
```

ä»¥ä¸Šã®éƒ¨åˆ†ã¯ã€csv ãƒ•ã‚¡ã‚¤ãƒ«ã‹rã‚ã€ãƒ•ã‚¡ã‚¤ãƒ«ã®èª­ã¿è¾¼ã¿ã‚’è¡Œã† Stream ã‚’ä½œæˆã—ã€ã•ã‚‰ã«ãã‚Œã‚’ `readline` ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã® input ã¨ã—ã¦è¨­å®šã—ã€`rl` ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã‚’ä½œæˆã—ã¦ã„ã‚‹ã€‚

ã•ã¦ã€ã“ã“ã§çªç„¶å‡ºã¦ããŸ Stream ã¨ã¯ãªã‚“ãªã®ã‹ï¼Ÿ

### Stream
Node.js ã§ã¯ã€å…¥å‡ºåŠ›ãŒç™ºç”Ÿã™ã‚‹å‡¦ç†ã‚’ã»ã¨ã‚“ã© **Stream** ã¨ã„ã†å½¢ã§æ‰±ã†ã€‚Stream ã¨ã¯ã€éåŒæœŸã§æƒ…å ±ã‚’å–ã‚Šæ‰±ã†ãŸã‚ã®æ¦‚å¿µã§ã€æƒ…å ±è‡ªä½“ã§ã¯ãªãæƒ…å ±ã®æµã‚Œã«æ³¨ç›®ã™ã‚‹ã€‚

Node.js ã§ Stream ã‚’æ‰±ã†éš›ã¯ã€Stream ã«å¯¾ã—ã¦ã‚¤ãƒ™ãƒ³ãƒˆã‚’ç›£è¦–ã—ã€ã‚¤ãƒ™ãƒ³ãƒˆãŒç™ºç”Ÿã—ãŸã¨ãã«å‘¼ã³å‡ºã•ã‚Œã‚‹é–¢æ•°ã‚’è¨­å®šã™ã‚‹ã“ã¨ã«ã‚ˆã£ã¦ã€æƒ…å ±ã‚’åˆ©ç”¨ã™ã‚‹ã€‚

ã“ã®ã‚ˆã†ã«ã€ã‚ã‚‰ã‹ã˜ã‚ã‚¤ãƒ™ãƒ³ãƒˆãŒç™ºç”Ÿã—ãŸã¨ãã«å®Ÿè¡Œã•ã‚Œã‚‹é–¢æ•°ã‚’è¨­å®šã—ã¦ãŠã„ã¦ã€èµ·ã“ã£ãŸã‚¤ãƒ™ãƒ³ãƒˆã«å¿œã˜ã¦å‡¦ç†ã‚’è¡Œã†ã“ã¨ã‚’ **ã‚¤ãƒ™ãƒ³ãƒˆé§†å‹•å‹ãƒ—ãƒ­ã‚°ãƒ©ãƒŸãƒ³ã‚°** ã¨å‘¼ã¶ã€‚

```js
const rl = readline.createInterface({ 'input': rs, 'output': {} })
```

ã“ã“ã§ä½œæˆã•ã‚ŒãŸ `rl` ã¨ã„ã†ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã‚‚ Stream ã®ã‚¤ãƒ³ã‚¿ãƒ¼ãƒ•ã‚§ãƒ¼ã‚¹ã‚’æŒã£ã¦ã„ã‚‹ã€‚åˆ©ç”¨ã™ã‚‹éš›ã«ã¯

```js
rl.on('line', (lineString) => {
  console.log(lineString);
});
```

ã®ã‚ˆã†ãªã‚³ãƒ¼ãƒ‰ã«ãªã‚‹ã€‚ã“ã®ã‚³ãƒ¼ãƒ‰ã¯ã€`rl` ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã§ `line` ã¨ã„ã†ã‚¤ãƒ™ãƒ³ãƒˆãŒç™ºç”Ÿã—ãŸã‚‰ã“ã®ç„¡åé–¢æ•°ã‚’å‘¼ã‚“ã§ãã ã•ã„ã€ã¨ã„ã†æ„å‘³ã€‚ãªãŠã€`lineString` ã«ã¯ã€èª­ã¿è¾¼ã‚“ã  1 è¡Œã®æ–‡å­—åˆ—ãŒå…¥ã£ã¦ã„ã‚‹ã€‚

### ãƒ•ã‚¡ã‚¤ãƒ«ã‹ã‚‰ãƒ‡ãƒ¼ã‚¿ã‚’æŠœãå‡ºã™
2010 å¹´ã¨ 2015 å¹´ã®ãƒ‡ãƒ¼ã‚¿ã‹ã‚‰ã€Œé›†è¨ˆå¹´ã€ã€Œéƒ½é“åºœçœŒã€ã€Œ15ã€œ19æ­³ã®äººå£ã€ã‚’æŠœãå‡ºã™ã€ã¨ã„ã†å‡¦ç†ã‚’å®Ÿè£…ã—ãŸã„ã€‚

```js
rl.on('line', (lineString) => {
  const columns = lineString.split(',');
  const year = parseInt(columns[0]);
  const prefecture = columns[1];
  const popu = parseInt(columns[3]);

  if (year === 2010 | year === 2015) {
    console.log(year);
    console.log(prefecture);
    console.log(popu);
  }
});
```

### ã‚°ãƒ«ãƒ¼ãƒ”ãƒ³ã‚°ã‚’è¡Œã†

```js
'use strict';

const fs = require('fs');
const readline = require('readline');
const rs = fs.createReadStream('./popu-pref.csv');
const rl = readline.createInterface({ 'input' : rs, 'output': {} });
const prefectureDataMap = new Map(); // key: éƒ½é“åºœçœŒ value: é›†è¨ˆãƒ‡ãƒ¼ã‚¿ã®ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆ
rl.on('line', (lineString) => {
  const columns = lineString.split(',');
  const year = parseInt(columns[0]);
  const prefecture = columns[1];
  const popu = parseInt(columns[3]);
  if (year === 2010 | year === 2015) {
    // é€£æƒ³é…åˆ— `prefectureDataMap` ã‹ã‚‰ãƒ‡ãƒ¼ã‚¿ã‚’å–å¾—ã™ã‚‹ã€‚
    // value ã®å€¤ãŒ falsy ã®å ´åˆã«ã€value ã«åˆæœŸå€¤ã¨ãªã‚‹ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã‚’ä»£å…¥ã™ã‚‹ã€‚ãã®çœŒã®ãƒ‡ãƒ¼ã‚¿ã‚’å‡¦ç†ã™ã‚‹ã®ãŒã¯ã˜ã‚ã¦ã§ã‚ã‚Œã°ã€value ã®å€¤ã¯ undefined ã¨ãªã‚‹ã®ã§ã“ã®æ¡ä»¶ã‚’æº€ãŸã—ã€value ã«å€¤ãŒä»£å…¥ã•ã‚Œã‚‹
    let value = prefectureDataMap.get(prefecture);
    if (!value) {
      value = {
        popu10: 0,
        popu15: 0,
        change: null,
      };
    }
    
    if (year === 2010) {
      value.popu10 = popu;
    }
    
    if (value === 2015) {
      value.popu15 = popu;
    }
    
    prefectureDataMap.set(prefecture, value);
  }
});

// close ã‚¤ãƒ™ãƒ³ãƒˆã¯ã€å…¨ã¦ã®è¡Œã‚’èª­ã¿è¾¼ã¿çµ‚ã‚ã£ãŸã‚ã¨ã«å‘¼ã³å‡ºã•ã‚Œã‚‹ã€‚
// ã¾ãŸã€äººå£ã®å¤‰åŒ–ç‡ï¼ˆchangeï¼‰ã®è¨ˆç®—ã¯ã€ãã®çœŒã®ãƒ‡ãƒ¼ã‚¿ãŒæƒã£ãŸã‚ã¨ã§ã—ã‹æ­£ã—ãè¡Œãˆãªã„ã®ã§ã€close ã‚¤ãƒ™ãƒ³ãƒˆã®ä¸­ã¸å®Ÿè£…ã™ã‚‹
rl.on('close', () => {
  for (let [key, value] of prefectureDataMap) {
    value.change = value.popu15 / value.popu10;
  }
  console.log(prefectureDataMap);
});
```

**`for-of` æ§‹æ–‡ã«ã¤ã„ã¦**
Map ã‚„ Array ã®ä¸­èº«ã‚’ `of` ã®å‰ã«ä¸ãˆã‚‰ã‚ŒãŸå¤‰æ•°ã«ä»£å…¥ã—ã¦ for ãƒ«ãƒ¼ãƒ—ã¨åŒã˜ã“ã¨ãŒã§ãã‚‹ã€‚é…åˆ—ã«å«ã¾ã‚Œã‚‹è¦ç´ ã‚’ä½¿ã„ãŸã„ã ã‘ã§ã€æ·»å­—ã¯ä¸è¦ãªå ´åˆã«ä¾¿åˆ©ã€‚

ã¾ãŸã€Map ã« for-of ã‚’ä½¿ã†ã¨ã€ã‚­ãƒ¼ã¨å€¤ã§è¦ç´ ãŒ 2 ã¤ã‚ã‚‹é…åˆ—ãŒå‰ã«ä¸ãˆã‚‰ã‚ŒãŸå¤‰æ•°ã«ä»£å…¥ã•ã‚Œã‚‹ã€‚ã“ã“ã§ã¯ **åˆ†å‰²ä»£å…¥** ã¨ã„ã†æ–¹æ³•ã‚’ä½¿ã£ã¦ã„ã‚‹ã€‚

### ãƒ‡ãƒ¼ã‚¿ã®ä¸¦ã³æ›¿ãˆ
å¾—ã‚‰ã‚ŒãŸçµæœã‚’ã€å¤‰åŒ–ç‡ã”ã¨ã«ä¸¦ã¹æ›¿ãˆã¦ã¿ã‚‹ã€‚

```js
rl.on('close', () => {
  for (let [key, value] of prefectureDataMap) { 
    value.change = value.popu15 / value.popu10;
  }
  const rankingArray = Array.from(prefectureDataMap).sort((pair1, pair2) => {
    return pair2[1].change - pair1[1].change;
  });
  console.log(rankingArray);
});
```

ã¾ãšã€`Array.from(prefectureDataMap)` ã®éƒ¨åˆ†ã§ã€é€£æƒ³é…åˆ—ã‚’æ™®é€šã®é…åˆ—ã«å¤‰æ›ã™ã‚‹å‡¦ç†ã‚’è¡Œã£ã¦ã„ã‚‹ã€‚ã•ã‚‰ã«ã€Array ã® `sort` é–¢æ•°ã‚’å‘¼ã‚“ã§ã€ç„¡åé–¢æ•°ã‚’æ¸¡ã—ã¦ã„ã‚‹ã€‚`sort` ã«å¯¾ã—ã¦æ¸¡ã™ã“ã®é–¢æ•°ã¯ *æ¯”è¼ƒé–¢æ•°* ã¨è¨€ã„ã€ã“ã‚Œã«ã‚ˆã£ã¦ä¸¦ã³æ›¿ãˆã®ãƒ«ãƒ¼ãƒ«ã‚’æ±ºã‚ã‚‹ã“ã¨ãŒã§ãã‚‹ã€‚

æ¯”è¼ƒé–¢æ•°ã¯ 2 ã¤ã®å¼•æ•°ã‚’å—ã‘å–ã£ã¦ã€å‰è€…ã®å¼•æ•°ã‚’ pair1 ã‚’å¾Œè€…ã®å¼•æ•° pair2 ã‚ˆã‚Šå‰ã«ã—ãŸã„ã¨ãã¯è² ã®æ•´æ•°ã‚’ã€pair2 ã‚’ pair1 ã‚ˆã‚Šå‰ã«ã—ãŸã„ã¨ãã¯æ­£ã®æ•´æ•°ã‚’ã€pair1 ã¨ pair2 ã®ä¸¦ã³ã‚’ãã®ã¾ã¾ã«ã—ãŸã„ã¨ãã¯ 0 ã‚’è¿”ã™å¿…è¦ãŒã‚ã‚‹ã€‚

ã“ã“ã§ã¯å¤‰åŒ–ç‡ã®é™é †ã«ä¸¦ã³æ›¿ãˆè¡Œã„ãŸã„ã®ã§ã€pair2 ãŒ pair1 ã‚ˆã‚Šå¤§ãã‹ã£ãŸå ´åˆã€pair2 ã‚’ pair1 ã‚ˆã‚Šå‰ã«ã™ã‚‹å¿…è¦ãŒã‚ã‚‹ã€‚

ã¤ã¾ã‚Šã€pair2 ãŒ pair1 ã‚ˆã‚Šå¤§ãã„ã¨ãã«æ­£ã®æ•´æ•°ã‚’è¿”ã™ã‚ˆã†ãªå‡¦ç†ã‚’æ›¸ã‘ã°ã‚ˆã„ã®ã§ã€ã“ã“ã§ã¯ pair2 ã®å¤‰åŒ–ç‡ã®ãƒ—ãƒ­ãƒ‘ãƒ†ã‚£ã‹ã‚‰ pair1 ã®å¤‰åŒ–ç‡ã®ãƒ—ãƒ­ãƒ‘ãƒ†ã‚£ã‚’å¼•ãç®—ã—ãŸå€¤ã‚’è¿”ã—ã¦ã„ã‚‹ã€‚

è©³ç´°ã¯ [MDN ã® sort é–¢æ•°ã®ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ](https://developer.mozilla.org/ja/docs/Web/JavaScript/Reference/Global_Objects/Array/sort)ã€‚

ï¼ˆã¡ãªã¿ã«ã€ã“ã“ã§ã® pair1, pair2 ã¯ï¼ˆ`Array.from(prefectureDataMap)` ã‚’è¡Œã£ãŸã‚‚ã®ã§ã‚ã‚Šã€ï¼‰ `['hoge çœŒ', { popu10: ..., popu15: ..., change: ...}]` ã¨ã„ã†å½¢ã‚’ã—ã¦ã„ã‚‹ã®ã§ã€`pair1[1].change`  ãªã©ã¨æŒ‡å®šã—ã¦ã„ã‚‹ï¼‰

> `Array.from()` ã«ã¤ã„ã¦ï¼šArray.from() ãƒ¡ã‚½ãƒƒãƒ‰ã‚’ç”¨ã„ã‚Œã°ã€é…åˆ—ã«ä¼¼ãŸå½¢ã®ã‚‚ã®ï¼ˆã“ã“ã§ã¯ Mapï¼‰ã‚’æ™®é€šã®é…åˆ—ã«å¤‰æ›ã™ã‚‹ã“ã¨ãŒã§ãã‚‹ã€‚ã“ã“ã§ã¯ã€`prefectureDataMap` ã¯ã€å„éƒ½é“åºœçœŒåãŒ key ã§ã€å„é›†è¨ˆãƒ‡ãƒ¼ã‚¿ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆãŒ value ã® Map ã§ã‚ã£ãŸã‹ã‚‰ã€`Array.from(prefectureDataMap)` ã¨ã™ã‚‹ã¨ `[['hoge çœŒ', { popu10: ..., popu15: ..., change: ...}],[...],...,[...]]`ã¨ã„ã†å½¢ã®é…åˆ—ã«ãªã‚‹ã€‚

æœ€å¾Œã«ã€`map` é–¢æ•°ã‚’ä½¿ã£ã¦ã€ãã‚Œã„ã«æ•´å½¢ã—ã¦å‡ºåŠ›ã—ã¦ã¿ã‚‹ã€‚

```js
rl.on('close', () => {
  for (let [key, value] of prefectureDataMap) {
    value.change = value.popu15 / value.popu10;
  }
  const rankingArray = Array.from(prefectureDataMap).sort((pair1, pair2) => {
    return pair2[1].change - pair1[1].change;
  });
  const rankingStrings = rankingArray.map(([key, value]) => {
    return key + ': ' + value.popu10 + '=>' + value.popu15 + ' å¤‰åŒ–ç‡ï¼š ' + value.change;
  });
  console.log(rankingStrings);
});
```

## ãƒ©ã‚¤ãƒ–ãƒ©ãƒª
### ç’°å¢ƒå¤‰æ•°
ç’°å¢ƒå¤‰æ•°ã¯ç‰¹åˆ¥ãªã‚·ã‚§ãƒ«å¤‰æ•°ã€‚é€šå¸¸ã®ã‚·ã‚§ãƒ«å¤‰æ•°ã¯ç¾åœ¨å®Ÿè¡Œã—ã¦ã„ã‚‹ã‚·ã‚§ãƒ«ã‹ã‚‰ã—ã‹å‚ç…§ã§ããªã„ãŒã€ç’°å¢ƒå¤‰æ•°ã¯ã‚·ã‚§ãƒ«ã§å®Ÿè¡Œã—ãŸãƒ—ãƒ­ã‚»ã‚¹ã‹ã‚‰ã‚‚å‚ç…§ã§ãã‚‹ã€‚Ubuntu ã§ã¯ã€ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã§ãƒ¦ãƒ¼ã‚¶ãƒ¼åãŒä»£å…¥ã•ã‚Œã¦ã„ã‚‹ `USER` ã‚„ã€ãƒ¦ãƒ¼ã‚¶ãƒ¼ã®ãƒ›ãƒ¼ãƒ ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã®å ´æ‰€ãŒä»£å…¥ã•ã‚Œã¦ã„ã‚‹ `HOME` ãªã©ãŒã‚ã‚‹ã€‚

Ubuntu ã§ã€ç¾åœ¨ã®ã‚·ã‚§ãƒ«ã§å®šç¾©ã•ã‚Œã¦ã„ã‚‹ç’°å¢ƒå¤‰æ•°ä¸€è¦§ã‚’ã¿ã‚‹ã«ã¯ `printenv` ã‚³ãƒãƒ³ãƒ‰ã‚’ä½¿ã†ã€‚

å€‹ã€…ã®ç’°å¢ƒå¤‰æ•°ã®å€¤ã‚’è¡¨ç¤ºã•ã›ã‚‹ã¨ãã¯ `echo` ã‚³ãƒãƒ³ãƒ‰ã‚’ä½¿ã†ã€‚

```bash
$ echo $HOME
/root
```

`PATH` ã¨ã„ã†ç’°å¢ƒå¤‰æ•°ã¯ã€å®Ÿè¡Œã—ãŸã„ãƒ—ãƒ­ã‚°ãƒ©ãƒ ãŒã‚ã‚‹å ´æ‰€ã‚’åˆ—æŒ™ã—ã¦ãŠãã‚‚ã®ã€‚`PATH` ã«æŒ‡å®šã•ã‚ŒãŸå ´æ‰€ã«ã‚ã‚‹ãƒ—ãƒ­ã‚°ãƒ©ãƒ ã¯ã€ãã®ãƒ•ã‚¡ã‚¤ãƒ«åã‚’å…¥åŠ›ã™ã‚‹ã ã‘ã§å®Ÿè¡Œã§ãã‚‹ã‚ˆã†ã«ãªã‚Šã€çµ¶å¯¾ãƒ‘ã‚¹ã‚„ç›¸å¯¾ãƒ‘ã‚¹ã§ç›´æ¥ãƒ•ã‚¡ã‚¤ãƒ«ã‚’æŒ‡å®šã™ã‚‹å¿…è¦ã¯ãªã„ã€‚

ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ãŒå®Œäº†ã—ãŸã‚‰ã€

```bash
source ~/.bashrc
```

ã¨å…¥åŠ›ã™ã‚‹ã“ã¨ã§ã€è¨­å®šã‚’å†èª­è¾¼ã§ãã‚‹ã€‚

### npm ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã‚’ä½œã£ã¦ã¿ã‚‹
ãŸã¨ãˆã°ã€æ•´æ•°ã‚’è¶³ã—ã‚ã‚ã›ãŸã‚Šã™ã‚‹ sum ã¨ã„ã†ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã‚’ä½œæˆã—ã¦ã¿ã‚‹ã€‚

```bash
cd ~/workspace
mkdir sum
cd sum
yarn init
```

`yarn init` ã¨ã„ã†ã‚³ãƒãƒ³ãƒ‰ã§ã€npm ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã‚’ä½œæˆã™ã‚‹ãŸã‚ã®ãƒãƒ¥ãƒ¼ãƒˆãƒªã‚¢ãƒ«ã‚’èµ·å‹•ã™ã‚‹ã€‚ã‚¤ãƒ³ã‚¹ãƒˆãƒ©ã‚¯ã‚·ãƒ§ãƒ³ã«ã—ãŸãŒã£ã¦ Enter ã‚’æŠ¼ã—ã¦ã„ãã€‚`entry point` ã¨ã„ã†ã®ã¯ã€ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã¨ã—ã¦èª­ã¿è¾¼ã¾ã‚Œã‚‹ JavaScript ãƒ•ã‚¡ã‚¤ãƒ«åã®ã“ã¨ï¼ˆ`index.js` ã§ã‚ˆã„ï¼‰ã€‚

`ISC` ãƒ©ã‚¤ã‚»ãƒ³ã‚¹ã¨ã¯ã€ã‚½ãƒ•ãƒˆã‚¦ã‚§ã‚¢ã‚’ä½¿ç”¨ã€ã‚³ãƒ”ãƒ¼ã€æ”¹å¤‰ã€é…å¸ƒã™ã‚‹è¨±å¯ã‚’ä¸ãˆã‚‹ãƒ©ã‚¤ã‚»ãƒ³ã‚¹ã€‚
`private` ã®è¨­å®šã‚’ã™ã‚‹ã¨ã€å…¬é–‹ã¯ã—ãªã„ã“ã¨ã«ãªã‚‹ã€‚

ã“ã®çŠ¶æ…‹ã§ã€index.js ã‚’ä½œæˆã™ã‚‹ã€‚

```js
`use strict`
function add(numbers) {
  let result = 0;
  for (let num of numbers) {
    result = result + num;
  }
  return result;
}
module.exports = {
  add // add: add ã¨æ›¸ãã®ã¨åŒã˜
};
```

**`module.exports = { ... }` ã¨ã„ã†è¨˜æ³•ã«ã¤ã„ã¦**  
ç‰¹å®šã®é–¢æ•°ã‚’ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ã¨ã—ã¦å…¬é–‹ã™ã‚‹å ´åˆã«ã€`module.exports` ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã®ãƒ—ãƒ­ãƒ‘ãƒ†ã‚£ã¨ã—ã¦é–¢æ•°ã‚’ç™»éŒ²ã™ã‚‹ã€‚ã“ã†ã™ã‚‹ã“ã¨ã§ã€ã“ã®å ´åˆã§ã¯ã“ã® sum ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã« add ãƒ¡ã‚½ãƒƒãƒ‰ãŒè¿½åŠ ã•ã‚Œã‚‹ã€‚

### ä½œæˆã—ãŸãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã‚’ä½¿ç”¨ã™ã‚‹
ä»Šå›ã¯ npm ã«å…¬é–‹ã¯ã›ãšã€ãƒ­ãƒ¼ã‚«ãƒ«ã®åˆ¥ã®å ´æ‰€ã§ã“ã®ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã‚’ä½¿ã†ã€‚ã¾ãšã¯ã€ã“ã®ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã‚’ä½¿ã†ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã‚’ä½œæˆã—ã¦ã¿ã‚‹ã€‚

```bash
cd ~/workspace
mkdir sum-app
cd sum-app
```

å…ˆã»ã©ã¨åŒæ§˜ã« `yarn init` ã¨å…¥åŠ›ã—ã¦ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ä½œæˆã®ãƒãƒ¥ãƒ¼ãƒˆãƒªã‚¢ãƒ«ã‚’è¡Œã†ã€‚ãã—ã¦ã€å…ˆã»ã©é–‹ç™ºã—ãŸ sum ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã™ã‚‹ã€‚

```bash
yarn add ../sum
```

æ¬¡ã«ã€sum-app ãƒ•ã‚©ãƒ«ãƒ€ã‚’é–‹ã„ã¦ã€app.js ã‚’ä»¥ä¸‹ã®ã‚ˆã†ã«ç·¨é›†ã™ã‚‹ã€‚

```js
'use strict'
const s = require('sum');
console.log(s.add([1, 2, 3, 4]));
```

## ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«åŒ–ã•ã‚ŒãŸå‡¦ç†
CRUD ã‚’è€ƒãˆã€ä»¥ä¸‹ã®æ©Ÿèƒ½ã‚’æŒã¤ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ã‚’ä½œæˆã™ã‚‹ã€‚

- todo: ã‚¿ã‚¹ã‚¯ã®ä½œæˆ
- done: ã‚¿ã‚¹ã‚¯ã®çŠ¶æ…‹ã®æ›´æ–°ï¼ˆã€Œå®Œäº†ã€çŠ¶æ…‹ã«ã™ã‚‹ï¼‰
- list: ã‚¿ã‚¹ã‚¯ã®çŠ¶æ…‹ãŒæœªå®Œäº†ã®ã‚‚ã®ã®èª­ã¿è¾¼ã¿
- donelist: ã‚¿ã‚¹ã‚¯ã®çŠ¶æ…‹ãŒå®Œäº†ã®ã‚‚ã®ã®èª­ã¿è¾¼ã¿
- del: ã‚¿ã‚¹ã‚¯ã®å‰Šé™¤

ä»Šå›ã¯ãƒ†ã‚¹ãƒˆã‚³ãƒ¼ãƒ‰ã‚‚æ›¸ãã€‚`package.json` ã«ä»¥ä¸‹ã‚’è¿½è¨˜ã€‚

```json
"scripts": {
  "test": "node test.js"
}, ...
```

ä»Šå›ã®ã™ã¹ã¦ã®ãƒ‡ãƒ¼ã‚¿ã¯ã€é€£æƒ³é…åˆ— Map ã® key ã«ã‚¿ã‚¹ã‚¯ã®æ–‡å­—åˆ—ã‚’ã€value ã«å®Œäº†ã—ã¦ã„ã‚‹ã‹ã©ã†ã‹ã®çœŸå½å€¤ã‚’å…¥ã‚Œã‚‹ã“ã¨ã«ã‚ˆã£ã¦è¡¨ç¾ã™ã‚‹ã€‚

index.js
```js
'use strict';

// key: ã‚¿ã‚¹ã‚¯ã®æ–‡å­—åˆ— value: å®Œäº†ã—ã¦ã„ã‚‹ã‹ã©ã†ã‹ã®çœŸå½å€¤
const tasks = new Map();

/**
 * TODO ã‚’è¿½åŠ ã™ã‚‹
 * @param {string} task
 */
const todo = task => {
    tasks.set(task, false);
}

/**
 * ã‚¿ã‚¹ã‚¯ã¨å®Œäº†ã—ãŸã‹ã©ã†ã‹ãŒå«ã¾ã‚Œã‚‹é…åˆ—ã‚’å—ã‘å–ã‚Šã€å®Œäº†ã—ãŸã‹ã‚’è¿”ã™
 * @param {array} taskAndIsDonePair
 * @return {boolean} å®Œäº†ã—ãŸã‹ã©ã†ã‹
 */
const isDone = taskAndIsDonePair => {
    return taskAndIsDonePair[1];
}

/**
 * ã‚¿ã‚¹ã‚¯ã¨å®Œäº†ã—ãŸã‹ã©ã†ã‹ãŒå«ã¾ã‚Œã‚‹é…åˆ—ã‚’å—ã‘å–ã‚Šã€å®Œäº†ã—ã¦ã„ãªã„ã‹è¿”ã™
 * @param {array} taskAndIsDonePair
 * @return {boolean} å®Œäº†ã—ã¦ã„ãªã„ã‹ã©ã†ã‹
 */
const isNotDone = taskAndIsDonePair => {
    return !isDone(taskAndIsDonePair);
}

/**
 * TODO ã®ä¸€è¦§ã®é…åˆ—ã‚’å–å¾—ã™ã‚‹
 * @return {array}
 */
const list = () => {
    return Array.from(tasks) // Map ã‚’ã€ã‚­ãƒ¼ã¨å€¤ã§æ§‹æˆã•ã‚Œã‚‹è¦ç´  2 ã¤ã®é…åˆ—ã«å¤‰æ›ã™ã‚‹
        .filter(isNotDone)
        .map(t => t[0]);
}

/**
 * TODO ã‚’å®Œäº†çŠ¶æ…‹ã«ã™ã‚‹
 * @param {string} task
 */
const done = task => {
    if (tasks.has(task)) {
        tasks.set(task, true);
    }
}

/**
 * å®Œäº†æ¸ˆã¿ã®ã‚¿ã‚¹ã‚¯ã®ä¸€è¦§ã®é…åˆ—ã‚’å–å¾—ã™ã‚‹
 * @return {array}
 */
const donelist = () => {
    return Array.from(tasks)
                .filter(isDone)
                .map(t => t[0]);
}

/**
 * é …ç›®ã‚’å‰Šé™¤ã™ã‚‹
 * @param {string} task
 */
const del = task => {
    tasks.delete(task);
}

// todo é–¢æ•° ã¨ list é–¢æ•°ã‚’ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ã®é–¢æ•°ã¨ã—ã¦è¿½åŠ ã™ã‚‹
module.exports = { todo, list, done, donelist, del };
```

ä¸Šã®ã‚³ãƒ¼ãƒ‰ã«ãŠã„ã¦ã€`Array.from` é–¢æ•°ã¯ã€é€£æƒ³é…åˆ—ã® Map ã‚’ã‚­ãƒ¼ã¨å€¤ã§æ§‹æˆã•ã‚Œã‚‹è¦ç´  2 ã¤ã®é…åˆ—ã«å¤‰æ›ã™ã‚‹ã€‚`[['é‰›ç­†ã‚’è²·ã†', false], ['ã‚Šã‚“ã”ã‚’è²·ã†', true], ...]` ã®ã‚ˆã†ãªæ„Ÿã˜ã«ãªã‚‹ã€‚

`list` é–¢æ•°å†…éƒ¨ã§è¡Œã‚ã‚Œã¦ã„ã‚‹ã“ã¨ã‚’ä¾‹ç¤ºã™ã‚‹ã¨ä»¥ä¸‹ã®ã‚ˆã†ãªã‚¤ãƒ¡ãƒ¼ã‚¸ã€‚

```js
Array.from(Map { 'é‰›ç­†ã‚’è²·ã†' => false, 'ãƒãƒ¼ãƒˆã‚’è²·ã†' => false, 'å‹‰å¼·ã‚’ã™ã‚‹' => true })
// [ [ 'é‰›ç­†ã‚’è²·ã†', false ], [ 'ãƒãƒ¼ãƒˆã‚’è²·ã†', false ], [ 'å‹‰å¼·ã‚’ã™ã‚‹', true ] ]
[ [ 'é‰›ç­†ã‚’è²·ã†', false ], [ 'ãƒãƒ¼ãƒˆã‚’è²·ã†', false ], [ 'å‹‰å¼·ã‚’ã™ã‚‹', true ] ].filter(isNotDone)
// [ [ 'é‰›ç­†ã‚’è²·ã†', false ], [ 'ãƒãƒ¼ãƒˆã‚’è²·ã†', false ] ]
[ [ 'é‰›ç­†ã‚’è²·ã†', false ], [ 'ãƒãƒ¼ãƒˆã‚’è²·ã†', false ] ].map(t => t[0])
// [ 'é‰›ç­†ã‚’è²·ã†', 'ãƒãƒ¼ãƒˆã‚’è²·ã†' ]
```

ãƒ†ã‚¹ãƒˆã‚³ãƒ¼ãƒ‰ã¯ä»¥ä¸‹ã®ã‚ˆã†ã«ãªã‚‹ã€‚

```js
'use strict';

const todo = require('./index.js');
const assert = require('assert');

// todo ã¨ list ã®ãƒ†ã‚¹ãƒˆ
todo.todo('ãƒãƒ¼ãƒˆã‚’è²·ã†');
todo.todo('é‰›ç­†ã‚’è²·ã†');
assert.deepEqual(todo.list(), ['ãƒãƒ¼ãƒˆã‚’è²·ã†', 'é‰›ç­†ã‚’è²·ã†']);

// done ã¨ donelist ã®ãƒ†ã‚¹ãƒˆ
todo.done('é‰›ç­†ã‚’è²·ã†');
assert.deepEqual(todo.list(), ['ãƒãƒ¼ãƒˆã‚’è²·ã†']);
assert.deepEqual(todo.donelist(), ['é‰›ç­†ã‚’è²·ã†']);

// del ã®ãƒ†ã‚¹ãƒˆ
todo.del('ãƒãƒ¼ãƒˆã‚’è²·ã†');
todo.del('é‰›ç­†ã‚’è²·ã†');
assert.deepEqual(todo.list(), []);
assert.deepEqual(todo.donelist(), []);

console.log('ğŸ‰ãƒ†ã‚¹ãƒˆãŒæ­£å¸¸ã«å®Œäº†ã—ã¾ã—ãŸğŸ˜™');
```

ã“ã‚Œã§ `yarn test` ã‚’å®Ÿè¡Œã—ã¦ã€ã€Œãƒ†ã‚¹ãƒˆãŒæ­£å¸¸ã«å®Œäº†ã—ã¾ã—ãŸã€ã¨è¡¨ç¤ºã•ã‚Œã‚Œã°æˆåŠŸã€‚

```js
const assert = require('assert');
```
ä¸Šè¨˜ã¯ã€Node.js ã§ãƒ†ã‚¹ãƒˆã‚’ã™ã‚‹ãŸã‚ã®ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ« `assert` ã‚’å‘¼ã³å‡ºã—ã¦ã„ã‚‹ã€‚

```js
assert.deepEqual(todo.list(), ['ãƒãƒ¼ãƒˆã‚’è²·ã†', 'é‰›ç­†ã‚’è²·ã†']);
```

`assert.deepEqual` ã¯ã€ä¸ãˆã‚‰ã‚ŒãŸã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã‚„é…åˆ—ã®ä¸­èº«ã¾ã§æ¯”è¼ƒã—ã¦ãã‚Œã‚‹ `equal` é–¢æ•°ã€‚ã‚‚ã†å°‘ã—è©³ã—ãã¯ä»¥ä¸‹ã‚’å‚ç…§ã€‚

```js
assert.equal(1, 1); // âœ…
assert.equal([1], [1]) // ğŸ›‘ AssertionError
// â†‘ã¯ã€JavaScript ã§ã¯é…åˆ—ã‚„ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã‚’ == æ¼”ç®—å­ã§æ¯”è¼ƒã—ãŸå ´åˆã€
// åŒã˜ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆè‡ªèº«ã§ãªã„ã¨ false ã«ãªã‚‹ãŸã‚

assert.deepEqual([1], [1]); // âœ…
assert.deepEqual({p: 1}, {p: 1}); // âœ…
```